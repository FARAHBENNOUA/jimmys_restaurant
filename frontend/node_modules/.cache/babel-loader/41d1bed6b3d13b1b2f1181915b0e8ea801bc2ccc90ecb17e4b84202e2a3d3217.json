{"ast":null,"code":"import axios from \"axios\";\nconst API_URL = process.env.REACT_APP_API_BACK_URL || 'http://localhost:8787';\nexport const api = axios.create({\n  baseURL: API_URL\n});\napi.interceptors.request.use(config => {\n  if (config.data instanceof FormData) {\n    config.headers['Content-Type'] = 'multipart/form-data';\n  } else {\n    config.headers['Content-Type'] = 'application/json';\n  }\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\n// Ajout de l'intercepteur de réponse pour gérer les erreurs\napi.interceptors.response.use(response => response, error => {\n  // Gestion centralisée des erreurs\n  if (error.response && error.response.status === 401) {\n    // Token expiré ou invalide\n    authAPI.logout();\n    window.location = '/login';\n  }\n  return Promise.reject(error);\n});\nexport const userAPI = {\n  getAllUsers: () => api.get('/users'),\n  getUser: id => api.get(`/user/${id}`),\n  createUser: userData => api.post('/user', userData),\n  updateUser: (id, userData) => api.put(`/user/${id}`, userData),\n  deleteUser: id => api.delete(`/user/${id}`),\n  updateProfileImage: (id, imageFile) => {\n    const formData = new FormData();\n    formData.append('profileImage', imageFile);\n    return api.put(`/user/profileImage/${id}`, formData);\n  }\n};\nexport const authAPI = {\n  register: userData => api.post('/auth/register', userData),\n  login: credentials => api.post('/auth/login', credentials),\n  logout: () => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n  }\n};\nexport const platAPI = {\n  getAllPlats: () => api.get('/plats'),\n  getPlat: id => api.get(`/plat/${id}`),\n  createPlat: platData => api.post('/plat', platData),\n  updatePlat: (id, platData) => api.put(`/plat/${id}`, platData),\n  deletePlat: id => api.delete(`/plat/${id}`),\n  addPlatImages: (platId, formData) => api.post(`/plat/${platId}/images`, formData),\n  setPlatPrimaryImage: (platId, imageId) => api.put(`/plat/${platId}/images/${imageId}/primary`),\n  deletePlatImage: (platId, imageId) => api.delete(`/plat/${platId}/images/${imageId}`)\n};\nexport const ingredientAPI = {\n  getAllIngredients: () => api.get('/ingredients'),\n  createIngredient: ingredientData => api.post('/ingredient', ingredientData)\n};","map":{"version":3,"names":["axios","API_URL","process","env","REACT_APP_API_BACK_URL","api","create","baseURL","interceptors","request","use","config","data","FormData","headers","token","localStorage","getItem","Authorization","response","error","status","authAPI","logout","window","location","Promise","reject","userAPI","getAllUsers","get","getUser","id","createUser","userData","post","updateUser","put","deleteUser","delete","updateProfileImage","imageFile","formData","append","register","login","credentials","removeItem","platAPI","getAllPlats","getPlat","createPlat","platData","updatePlat","deletePlat","addPlatImages","platId","setPlatPrimaryImage","imageId","deletePlatImage","ingredientAPI","getAllIngredients","createIngredient","ingredientData"],"sources":["C:/Users/utilisateur/Desktop/jimmys_restaurant/frontend/src/api/config.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\nconst API_URL = process.env.REACT_APP_API_BACK_URL || 'http://localhost:8787';\r\n\r\nexport const api = axios.create({\r\n    baseURL: API_URL\r\n});\r\n\r\napi.interceptors.request.use((config) => {\r\n    if (config.data instanceof FormData) {\r\n        config.headers['Content-Type'] = 'multipart/form-data';\r\n    } else {\r\n        config.headers['Content-Type'] = 'application/json';\r\n    }\r\n\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n        config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n    return config;\r\n});\r\n\r\n// Ajout de l'intercepteur de réponse pour gérer les erreurs\r\napi.interceptors.response.use(\r\n  response => response,\r\n  error => {\r\n    // Gestion centralisée des erreurs\r\n    if (error.response && error.response.status === 401) {\r\n      // Token expiré ou invalide\r\n      authAPI.logout();\r\n      window.location = '/login';\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport const userAPI = {\r\n    getAllUsers: () => api.get('/users'),\r\n\r\n    getUser: (id) => api.get(`/user/${id}`),\r\n\r\n    createUser: (userData) => api.post('/user', userData),\r\n\r\n    updateUser: (id, userData) => api.put(`/user/${id}`, userData),\r\n\r\n    deleteUser: (id) => api.delete(`/user/${id}`),\r\n    \r\n    updateProfileImage: (id, imageFile) => {\r\n        const formData = new FormData();\r\n        formData.append('profileImage', imageFile);\r\n        return api.put(`/user/profileImage/${id}`, formData);\r\n    }\r\n};\r\n\r\nexport const authAPI = {\r\n    register: (userData) => api.post('/auth/register', userData),\r\n\r\n    login: (credentials) => api.post('/auth/login', credentials),\r\n\r\n    logout: () => {\r\n        localStorage.removeItem('token');\r\n        localStorage.removeItem('user');\r\n    }\r\n};\r\n\r\nexport const platAPI = {\r\n    getAllPlats: () => api.get('/plats'),\r\n    \r\n    getPlat: (id) => api.get(`/plat/${id}`),\r\n    \r\n    createPlat: (platData) => api.post('/plat', platData),\r\n    \r\n    updatePlat: (id, platData) => api.put(`/plat/${id}`, platData),\r\n    \r\n    deletePlat: (id) => api.delete(`/plat/${id}`),\r\n    \r\n    addPlatImages: (platId, formData) => api.post(`/plat/${platId}/images`, formData),\r\n    \r\n    setPlatPrimaryImage: (platId, imageId) => api.put(`/plat/${platId}/images/${imageId}/primary`),\r\n    \r\n    deletePlatImage: (platId, imageId) => api.delete(`/plat/${platId}/images/${imageId}`)\r\n};\r\n\r\nexport const ingredientAPI = {\r\n    getAllIngredients: () => api.get('/ingredients'),\r\n    createIngredient: (ingredientData) => api.post('/ingredient', ingredientData)\r\n};"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,OAAO,GAAGC,OAAO,CAACC,GAAG,CAACC,sBAAsB,IAAI,uBAAuB;AAE7E,OAAO,MAAMC,GAAG,GAAGL,KAAK,CAACM,MAAM,CAAC;EAC5BC,OAAO,EAAEN;AACb,CAAC,CAAC;AAEFI,GAAG,CAACG,YAAY,CAACC,OAAO,CAACC,GAAG,CAAEC,MAAM,IAAK;EACrC,IAAIA,MAAM,CAACC,IAAI,YAAYC,QAAQ,EAAE;IACjCF,MAAM,CAACG,OAAO,CAAC,cAAc,CAAC,GAAG,qBAAqB;EAC1D,CAAC,MAAM;IACHH,MAAM,CAACG,OAAO,CAAC,cAAc,CAAC,GAAG,kBAAkB;EACvD;EAEA,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,IAAIF,KAAK,EAAE;IACPJ,MAAM,CAACG,OAAO,CAACI,aAAa,GAAG,UAAUH,KAAK,EAAE;EACpD;EACA,OAAOJ,MAAM;AACjB,CAAC,CAAC;;AAEF;AACAN,GAAG,CAACG,YAAY,CAACW,QAAQ,CAACT,GAAG,CAC3BS,QAAQ,IAAIA,QAAQ,EACpBC,KAAK,IAAI;EACP;EACA,IAAIA,KAAK,CAACD,QAAQ,IAAIC,KAAK,CAACD,QAAQ,CAACE,MAAM,KAAK,GAAG,EAAE;IACnD;IACAC,OAAO,CAACC,MAAM,CAAC,CAAC;IAChBC,MAAM,CAACC,QAAQ,GAAG,QAAQ;EAC5B;EACA,OAAOC,OAAO,CAACC,MAAM,CAACP,KAAK,CAAC;AAC9B,CACF,CAAC;AAED,OAAO,MAAMQ,OAAO,GAAG;EACnBC,WAAW,EAAEA,CAAA,KAAMxB,GAAG,CAACyB,GAAG,CAAC,QAAQ,CAAC;EAEpCC,OAAO,EAAGC,EAAE,IAAK3B,GAAG,CAACyB,GAAG,CAAC,SAASE,EAAE,EAAE,CAAC;EAEvCC,UAAU,EAAGC,QAAQ,IAAK7B,GAAG,CAAC8B,IAAI,CAAC,OAAO,EAAED,QAAQ,CAAC;EAErDE,UAAU,EAAEA,CAACJ,EAAE,EAAEE,QAAQ,KAAK7B,GAAG,CAACgC,GAAG,CAAC,SAASL,EAAE,EAAE,EAAEE,QAAQ,CAAC;EAE9DI,UAAU,EAAGN,EAAE,IAAK3B,GAAG,CAACkC,MAAM,CAAC,SAASP,EAAE,EAAE,CAAC;EAE7CQ,kBAAkB,EAAEA,CAACR,EAAE,EAAES,SAAS,KAAK;IACnC,MAAMC,QAAQ,GAAG,IAAI7B,QAAQ,CAAC,CAAC;IAC/B6B,QAAQ,CAACC,MAAM,CAAC,cAAc,EAAEF,SAAS,CAAC;IAC1C,OAAOpC,GAAG,CAACgC,GAAG,CAAC,sBAAsBL,EAAE,EAAE,EAAEU,QAAQ,CAAC;EACxD;AACJ,CAAC;AAED,OAAO,MAAMpB,OAAO,GAAG;EACnBsB,QAAQ,EAAGV,QAAQ,IAAK7B,GAAG,CAAC8B,IAAI,CAAC,gBAAgB,EAAED,QAAQ,CAAC;EAE5DW,KAAK,EAAGC,WAAW,IAAKzC,GAAG,CAAC8B,IAAI,CAAC,aAAa,EAAEW,WAAW,CAAC;EAE5DvB,MAAM,EAAEA,CAAA,KAAM;IACVP,YAAY,CAAC+B,UAAU,CAAC,OAAO,CAAC;IAChC/B,YAAY,CAAC+B,UAAU,CAAC,MAAM,CAAC;EACnC;AACJ,CAAC;AAED,OAAO,MAAMC,OAAO,GAAG;EACnBC,WAAW,EAAEA,CAAA,KAAM5C,GAAG,CAACyB,GAAG,CAAC,QAAQ,CAAC;EAEpCoB,OAAO,EAAGlB,EAAE,IAAK3B,GAAG,CAACyB,GAAG,CAAC,SAASE,EAAE,EAAE,CAAC;EAEvCmB,UAAU,EAAGC,QAAQ,IAAK/C,GAAG,CAAC8B,IAAI,CAAC,OAAO,EAAEiB,QAAQ,CAAC;EAErDC,UAAU,EAAEA,CAACrB,EAAE,EAAEoB,QAAQ,KAAK/C,GAAG,CAACgC,GAAG,CAAC,SAASL,EAAE,EAAE,EAAEoB,QAAQ,CAAC;EAE9DE,UAAU,EAAGtB,EAAE,IAAK3B,GAAG,CAACkC,MAAM,CAAC,SAASP,EAAE,EAAE,CAAC;EAE7CuB,aAAa,EAAEA,CAACC,MAAM,EAAEd,QAAQ,KAAKrC,GAAG,CAAC8B,IAAI,CAAC,SAASqB,MAAM,SAAS,EAAEd,QAAQ,CAAC;EAEjFe,mBAAmB,EAAEA,CAACD,MAAM,EAAEE,OAAO,KAAKrD,GAAG,CAACgC,GAAG,CAAC,SAASmB,MAAM,WAAWE,OAAO,UAAU,CAAC;EAE9FC,eAAe,EAAEA,CAACH,MAAM,EAAEE,OAAO,KAAKrD,GAAG,CAACkC,MAAM,CAAC,SAASiB,MAAM,WAAWE,OAAO,EAAE;AACxF,CAAC;AAED,OAAO,MAAME,aAAa,GAAG;EACzBC,iBAAiB,EAAEA,CAAA,KAAMxD,GAAG,CAACyB,GAAG,CAAC,cAAc,CAAC;EAChDgC,gBAAgB,EAAGC,cAAc,IAAK1D,GAAG,CAAC8B,IAAI,CAAC,aAAa,EAAE4B,cAAc;AAChF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}